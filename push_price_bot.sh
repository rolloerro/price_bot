#!/bin/bash

# –î—Ä—É–∂–µ—Å–∫–∏–π –ø—Ä–∏–≤–µ—Ç
echo "üöÄ –ü—Ä–∏–≤–µ—Ç! –ì–æ—Ç–æ–≤–∏–º –ø—Ä–∞–π—Å –±–æ—Ç –∫ –∑–∞–ª–∏–≤–∫–µ –Ω–∞ GitHub..."

# –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –ø–∞–ø–∫—É —Å –±–æ—Ç–æ–º (–µ—Å–ª–∏ –∑–∞–ø—É—Å–∫–∞–µ—à—å —Å–∫—Ä–∏–ø—Ç –∏–∑ –¥—Ä—É–≥–æ–π –ø–∞–ø–∫–∏)
cd "$(dirname "$0")"

# –°–æ–∑–¥–∞—ë–º .gitignore, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
if [ ! -f .gitignore ]; then
  echo "venv/" > .gitignore
  echo ".DS_Store" >> .gitignore
  echo ".vscode/" >> .gitignore
  echo ".gitignore —Å–æ–∑–¥–∞–Ω ‚úÖ"
fi

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, –µ—Å–ª–∏ –µ—â—ë –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
if [ ! -d .git ]; then
  git init
  echo "Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω ‚úÖ"
fi

# –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ —Ñ–∞–π–ª—ã –∏ –∫–æ–º–º–∏—Ç–∏–º
git add .
git commit -m "–î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∞–π—Å –±–æ—Ç" || echo "‚ö†Ô∏è –ù–µ—á–µ–≥–æ –∫–æ–º–º–∏—Ç–∏—Ç—å, –≤–æ–∑–º–æ–∂–Ω–æ —É–∂–µ –∑–∞–∫–æ–º–º–∏—á–µ–Ω–æ"

# –°–æ–∑–¥–∞—ë–º –≤–µ—Ç–∫—É main, –µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω–∞
git branch -M main 2>/dev/null || echo "–í–µ—Ç–∫–∞ main —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"

# –ü–æ–¥–∫–ª—é—á–∞–µ–º —É–¥–∞–ª—ë–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–∑–∞–º–µ–Ω–∏ —Å—Å—ã–ª–∫—É –Ω–∞ —Å–≤–æ–π)
git remote remove origin 2>/dev/null
git remote add origin https://github.com/rolloerro/price_bot.git
# –ü—É—à–∏–º –Ω–∞ GitHub
git push -u origin main

echo "üéâ –ü—Ä–∞–π—Å –±–æ—Ç —É—Å–ø–µ—à–Ω–æ –∑–∞–ª–∏—Ç –Ω–∞ GitHub!"
